meta:
  dataset: gdp
  findability: public
  owner: AcciyGerman
  ownerid: a08d3588fbae0355042537595c65819d

inputs:
  -
    kind: datapackage
    parameters:
      resource-mapping:
        gdp: http://api.worldbank.org/indicator/NY.GDP.MKTP.CD?format=csv

processing:
  -
    input: gdp
    output: gdp
    dpp:
      -
        run: unpivot
        parameters:
          resources: gdp
          extraKeyFields:
            -
              name: year
              type: year
          extraValueField:
              name: value
              type: number
          unpivot:
            -
              name: ([0-9]{4})
              keys:
                year: \1

schedule: every 365d